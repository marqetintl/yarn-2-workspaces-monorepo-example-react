# yarn-2-workspaces-monorepo-example-react.

1. Follow steps 1 to 4 from [the simple monorepo example](https://github.com/marqetintl/yarn-2-workspaces-monorepo-example#2-setup-from-scratch)

2. Add three packages miq-counter, miq-counter-layout and miq-shared to our monorepo:

```
cd packages/
create-react-app miq-counter
create-react-app miq-counter-layout
create-react-app miq-shared

```

Delete `yarn-lock` files generated by CRA

```
rm -rf miq-counter/yarn.lock
rm -rf miq-counter-layout/yarn.lock
rm -rf miq-shared/yarn.lock
```

Add craco

```
cd ../
yarn add -D @craco/craco
yarn workspace @miq/counter add eslint-config-react-app
yarn workspace @miq/counter add -D @craco/craco
```

Add craco config

```bash
touch craco.config.js
```

Update `craco.config.js`:

```js

```

Update `packages/miq-counter/package.json` to match the following:

```json
{
    "name": "@miq/counter",
    // ...
    "dependencies": {
        "@miq/counter-layout": "workspace:*",
        "@miq/shared": "workspace:*"
        // ...
    },
    // ...
    "scripts": {
        "start": "craco start --config ../../craco.config.js",
        "build": "craco build",
        "test": "craco test",
        "eject": "craco eject"
    }
    // ...
}
```

Update `packages/miq-counter-layout/package.json` to match the following:

```json
{
    "name": "@miq/counter-layout",
    "main": "src/index.jsx",
    // ...
    "dependencies": {
        "@miq/shared": "workspace:*"
        // ...
    }
    // ...
}
```

Update `packages/miq-shared/package.json` to match the following:

```json
{
    "name": "@miq/shared",
    "main": "src/index.jsx"
    // ...
}
```

Rename

```
mv packages/miq-shared/src/index.js packages/miq-shared/src/index.jsx
mv packages/miq-counter/src/index.js packages/miq-counter/src/index.jsx
mv packages/miq-counter-layout/src/index.js packages/miq-counter-layout/src/index.jsx
```

Install deps

```
yarn
```

Update `packages/miq-shared/src/index.jsx`:

```
export const Btn = ({ label, ...props }) => <button {...props}>{label}</button>;

Update `packages/miq-counter-layout/src/index.jsx`:

```

export const Btn = ({ label, ...props }) => <button {...props}>{label}</button>;

```

```

Update `package.json`

```json
{
    "name": "@miq/yarn-2-workspaces-monorepo-example-react",
    "private": true,
    "workspaces": ["packages/*"],
    "scripts": {
        "start:counter": "yarn workspace @miq/counter start"
    }
}
```
